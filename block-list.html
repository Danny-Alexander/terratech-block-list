<!DOCTYPE html>
<html>

<head>
	<!-- DataTables installed options https://datatables.net/download/index (via DataTables CDN)-->
	<link rel="stylesheet" type="text/css"
		href="https://cdn.datatables.net/v/zf/jq-3.3.1/jszip-2.5.0/dt-1.10.18/b-1.5.6/b-colvis-1.5.6/b-flash-1.5.6/b-html5-1.5.6/b-print-1.5.6/cr-1.5.0/fc-3.2.5/fh-3.1.4/kt-2.5.0/r-2.2.2/rg-1.1.0/rr-1.2.4/sc-2.0.0/sl-1.3.0/datatables.min.css" />

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
	<script type="text/javascript"
		src="https://cdn.datatables.net/v/zf/jq-3.3.1/jszip-2.5.0/dt-1.10.18/b-1.5.6/b-colvis-1.5.6/b-flash-1.5.6/b-html5-1.5.6/b-print-1.5.6/cr-1.5.0/fc-3.2.5/fh-3.1.4/kt-2.5.0/r-2.2.2/rg-1.1.0/rr-1.2.4/sc-2.0.0/sl-1.3.0/datatables.min.js"></script>

	<!-- Foundation Styling -->
	<link rel="stylesheet" type="text/css"
		href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css"
		href="https://cdn.datatables.net/1.10.19/css/dataTables.foundation.min.css" />

	<script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.foundation.min.js"></script>

	<!-- Dunno what effect removing this would have on other platforms so I didn't (I wanted to though) -->
	<meta charset=utf-8 />

</head>

<body>
	<div class="container">
		<table id="blocks-table" class="display" style="width:100%">
			<thead>
				<tr>
					<th>Name</th>
					<th>Category</th>
					<th>Corp</th>
					<th>Grade</th>
					<th>Price</th>
					<th>Health</th>
					<th>Mass</th>
					<th>Description</th>
				</tr>
			</thead>
			<tfoot>
				<tr>
					<th>Name</th>
					<th>Category</th>
					<th>Corp</th>
					<th>Grade</th>
					<th>Price</th>
					<th>Health</th>
					<th>Mass</th>
					<th>Description</th>
				</tr>
			</tfoot>
		</table>
	</div>
	<script>
		$(document).ready(function () {
			var table = $('#blocks-table').DataTable({
				processing: true,

				// Allow changing the column order
				colReorder: true,

				// rowGroup: {
				// 	dataSrc: 'category'
				// },

				// Enable optimising the table's layout for different screen sizes https://datatables.net/extensions/responsive/
				responsive: true,

				// Make rows selectable
				select: true,

				// Enable buttons to copy and export data
				buttons: [
					'copy', 'csv', 'excel', 'pdf'
					// , 'colvis' didn't work - dropdown shows but does nothing. May be related to having Ajax based dynamic table, IDK.
				],

				// Display buttons with filter control (search). 
				// Also determines the page layout: https://datatables.net/reference/option/dom
				dom: 'lfBrtip',

				// The JSON data to display
				"ajax": "https://api.myjson.com/bins/1231z1",
				// Correlate data elements to columns define above (order specific)
				"columns": [
					{ "data": "block" },
					{ "data": "category" },
					{ "data": "corp" },
					{ "data": "grade" },
					{
						"data": "price",
						"render": function (data, type, row, meta) {
							return type === 'display' ?
								data.toLocaleString() + ' ฿฿' :
								data;
						}
					},
					{
						"data": "health",
						"render": function (data, type, row, meta) {
							return type === 'display' ?
								data.toLocaleString() :
								data;
						}
					},
					{
						"data": "mass",
						"render": function (data, type, row, meta) {
							return type === 'display' ?
								data.toLocaleString() :
								data;
						}
					},
					{
						"data": "description",
						"render": function (data, type, row, meta) {
							return type === 'display' && data.length > 30 ?
								'<span title="' + data + '">' + data.substr(0, 28) + '...</span>' :
								data;
						}
					}
				]
			});

			// $('a.toggle-vis').on('click', function (e) {
			// 	e.preventDefault();

			// 	// Get the column API object
			// 	var column = table.column($(this).attr('data-column'));

			// 	// Toggle the visibility
			// 	column.visible(!column.visible());
			// });
		});
	</script>
</body>

</html>